<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ГАУЗ Кайбицкая ЦРБ</title>
    <link rel="icon" type="image/png" href="data/logo_nobg.png">
    <link rel="stylesheet" href="styles.css">
    <script src="https://api-maps.yandex.ru/2.1/?apikey=03603db9-a7ee-4acd-8366-1d5eba2b6eda&lang=ru_RU" type="text/javascript"></script>
    <script src="js/load-components.js" defer></script>
</head>
<body>
    <!-- Шапка сайта -->
    <div id="header-placeholder"></div>

    <!-- Главный баннер -->
    <section class="hero">
        <div class="snowflakes" aria-hidden="true">
            <div class="snowflake">❄</div>
            <div class="snowflake">❅</div>
            <div class="snowflake">❆</div>
            <div class="snowflake">❄</div>
            <div class="snowflake">❅</div>
            <div class="snowflake">❆</div>
            <div class="snowflake">❄</div>
            <div class="snowflake">❅</div>
            <div class="snowflake">❆</div>
            <div class="snowflake">❄</div>
            <div class="snowflake">❅</div>
            <div class="snowflake">❆</div>
        </div>
        <div class="container">
            <div class="hero-content">
                <h2 class="hero-title">Кайбицкая центральная районная больница</h2>
                <p class="hero-description">Государственное автономное учреждение здравоохранения</p>

                <div class="hero-meta">
                    <a href="#contacts" class="hero-meta-link">РТ, Кайбицкий р-н, ул. Гисматуллина, 1</a>
                    <a href="#contacts" class="hero-meta-link">08:00 – 16:15&nbsp;Пн–Пт</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Последние новости -->
    <section id="news" class="services">
        <div class="container">
            <h2 class="section-title">Новости</h2>
            <div class="news-grid news-grid-centered">
                <article class="news-card">
                    <div class="news-image">
                        <img src="news/img/1_max.jpg" alt="Мы теперь в MAX">
                    </div>
                    <div class="news-content">
                        <h3>Мы теперь в MAX</h3>
                        <p>Следите за нами в социальной сети MAX. Ссылка на канал: <a href="https://max.ru/id1621000421_gos" target="_blank" rel="noopener noreferrer">https://max.ru/id1621000421_gos</a></p>
                        <span class="news-date">12.12.2025</span>
                    </div>
                </article>

                <article class="news-card">
                    <div class="news-image news-image-white-bg">
                        <img src="news/img/2_takzdorovo.png" alt="ТакЗдорово">
                    </div>
                    <div class="news-content">
                        <h3>ТакЗдорово - Официальный портал Минздрава России о Вашем здоровье</h3>
                        <p>Ссылка на сайт: <a href="https://www.takzdorovo.ru/" target="_blank" rel="noopener noreferrer">https://www.takzdorovo.ru/</a></p>
                        <span class="news-date">12.12.2025</span>
                    </div>
                </article>
            </div>
            <div class="news-actions">
                <a class="btn btn-primary" href="news/news.html">Все новости</a>
            </div>
        </div>
    </section>

    <!-- О клинике -->
    <section id="about" class="about">
        <div class="container">
            <h2 class="section-title">О больнице</h2>
            <div class="about-content">
                <div class="about-text">
                    <p>
                        В центральной районной больнице функционирует стационар на 102 койки, из них 51 — койки круглосуточного пребывания.
                        В состав учреждения также входят поликлиника, Большеподберезинская врачебная амбулатория на 9 коек и 30 фельдшерско-акушерских пунктов.
                    </p>
                    <p>
                        Жителям района оказывается стационарная помощь в следующих отделениях:
                         хирургическом,
                         терапевтическом,
                         гинекологическом,
                         педиатрическом,
                         инфекционном.
                    </p>
                    <p>
                        Также предусмотрена одна реанимационная койка.
                    </p>
                    <p>
                        В поликлинике ЦРБ ведут прием специалисты: терапевт, хирург, акушер-гинеколог, офтальмолог, отоларинголог,
                        невролог, психиатр-нарколог, педиатр, стоматолог, фтизиатр, дерматовенеролог и онколог.
                    </p>
                </div>
                <div class="advantages">
                    <div class="advantage-item">
                        <h4>Количество коек</h4>
                        <p class="advantage-number">102</p>
                    </div>
                    <div class="advantage-item">
                        <h4>Число корпусов</h4>
                        <p class="advantage-number">3</p>
                    </div>
                    <div class="advantage-item">
                        <h4>Число клинических отделений</h4>
                        <p class="advantage-number">6</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Схема больницы -->
    <section id="scheme" class="scheme-section">
        <div class="container">
            <h2 class="section-title">Схема больницы</h2>
            <div class="scheme-container">
                <img src="data/Scheme.png" alt="Схема больницы" class="scheme-image" id="scheme-image">
            </div>
        </div>
    </section>

    <!-- Модальное окно для схемы -->
    <div id="scheme-modal" class="scheme-modal">
        <span class="scheme-modal-close">&times;</span>
        <img class="scheme-modal-content" id="scheme-modal-img" src="" alt="Схема больницы">
    </div>

    <!-- Карта -->
    <section id="contacts" class="map-section">
        <div class="map-overlay">
            <h4>Контакты</h4>
            <p>Республика Татарстан, с. Большие Кайбицы, ул. Гисматуллина, д. 1</p>
            <p><a href="tel:+78437021332">+7 (843) 702-13-32</a></p>
        </div>
        <div id="map"></div>
    </section>

    <!-- Контакты -->
    <div id="footer-placeholder"></div>

<script>
    // Анимация счётчиков с числами преимуществ
    document.addEventListener('DOMContentLoaded', function () {
        const counters = document.querySelectorAll('.advantage-number');
        if (!('IntersectionObserver' in window) || !counters.length) return;

        counters.forEach(counter => {
            const initial = parseInt(counter.textContent.replace(/\D/g, ''), 10);
            if (!isNaN(initial)) {
                counter.dataset.target = String(initial);
                counter.textContent = '0';
            }
        });

        function animateCounter(el) {
            if (el.dataset.animated === 'true') return;
            const target = parseInt(el.dataset.target || '0', 10);
            if (!target) return;

            el.dataset.animated = 'true';
            const duration = 900;
            const startTime = performance.now();

            function tick(now) {
                const progress = Math.min((now - startTime) / duration, 1);
                const value = Math.floor(progress * target);
                el.textContent = String(value);
                if (progress < 1) {
                    requestAnimationFrame(tick);
                } else {
                    el.textContent = String(target);
                }
            }

            requestAnimationFrame(tick);
        }

        const observer = new IntersectionObserver((entries, obs) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    animateCounter(entry.target);
                    obs.unobserve(entry.target);
                }
            });
        }, { threshold: 0.4 });

        counters.forEach(counter => observer.observe(counter));
    });
</script>

<script>
    function initMapV2() {
        try {
            const center = [55.408693, 48.183122];
            const map = new ymaps.Map('map', {
                center,
                zoom: 15,
                controls: ['zoomControl', 'typeSelector', 'fullscreenControl']
            });

            map.behaviors.enable('scrollZoom');

            const placemark = new ymaps.Placemark(center, {
                balloonContent: 'ГАУЗ Кайбицкая ЦРБ'
            }, {
                preset: 'islands#redMedicalIcon',
                draggable: false
            });

            map.geoObjects.add(placemark);
        } catch (e) {
            console.error('Ошибка инициализации карты', e);
            renderStaticFallback();
        }
    }

    function renderStaticFallback() {
        const fallback = document.getElementById('map');
        if (!fallback) return;
        fallback.innerHTML = '';
        const img = document.createElement('img');
        img.src = 'https://static-maps.yandex.ru/v1?ll=48.183122,55.408693&lang=ru_RU&z=15&size=650,450&scale=2&pt=48.183122,55.408693,pm2rdm&apikey=4a009991-4f15-44af-a4e0-8fb555d24827';
        img.alt = 'Карта (статическое изображение)';
        img.style.width = '100%';
        img.style.height = 'auto';
        fallback.appendChild(img);
    }

    if (window.ymaps) {
        ymaps.ready(initMapV2);
    } else {
        renderStaticFallback();
    }
</script>

<script>
    // Модальное окно для схемы больницы
    document.addEventListener('DOMContentLoaded', function() {
        const schemeImage = document.getElementById('scheme-image');
        const modal = document.getElementById('scheme-modal');
        const modalImg = document.getElementById('scheme-modal-img');
        const closeBtn = document.querySelector('.scheme-modal-close');

        if (schemeImage && modal && modalImg) {
            // Открытие модального окна при клике на изображение
            schemeImage.addEventListener('click', function() {
                modal.classList.add('show');
                modalImg.src = schemeImage.src;
                document.body.style.overflow = 'hidden'; // Блокируем прокрутку страницы
            });

            // Закрытие модального окна
            function closeModal() {
                modal.classList.remove('show');
                document.body.style.overflow = ''; // Восстанавливаем прокрутку
            }

            if (closeBtn) {
                closeBtn.addEventListener('click', closeModal);
            }

            // Закрытие при клике вне изображения
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    closeModal();
                }
            });

            // Закрытие по клавише Escape
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && modal.classList.contains('show')) {
                    closeModal();
                }
            });
        }
    });
</script>
</body>
</html>

